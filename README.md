# Backbeach Toolbox

A growing collection of utilities for coastal data processing, geospatial analysis, and beach metrics calculation.

As this project evolves, more tools for shoreline analysis, tide processing, and coastal morphodynamics will be added here.

## üöÄ Getting Started

### Prerequisites
- Python 3.11+
- Conda (recommended) or pip

### Installation

**Option 1: Using Conda (Recommended)**
This ensures all geospatial dependencies (GDAL, etc.) are handled correctly.
```bash
conda env create -f environment.yml
conda activate backbeach_toolbox
```

**Option 2: Using Pip**
```bash
pip install -r requirements.txt
```

---

## üõ†Ô∏è Available Tools

### 1. Back Beach Width Calculator
**Script:** `scripts/back_beach_finder.py`

This tool calculates the width of the "back beach" (the dry sandy area) by measuring the distance between a defined cliff toe and the point where the daily high tide intersects the beach profile.

**Key Features:**
- **Dynamic Intersection:** Intersects daily mean/max tide levels with high-resolution transect elevation profiles (DEMs).
- **Legacy Support:** Reads input metadata and cliff positions from legacy MATLAB (`.mat`) files.
- **Geospatial Processing:** Handles coordinate projections and transect geometry using `geopandas`.
- **Flexible Output:** Saves results as both Python-friendly `.npz` archives and MATLAB `.mat` files for compatibility.

**Usage:**

```bash
python scripts/back_beach_finder.py [options]
```

**Common Options:**
- `--mat-file`: Path to the master MATLAB file containing cliff toe and tide data.
- `--transects`: Path to the shapefile containing beach transect lines.
- `--output-npz`: Where to save the resulting width matrices (Python format).
- `--tide-method`: Method for daily tide aggregation (`mean` or `max`).

**Example:**
```bash
python scripts/back_beach_finder.py \
    --mat-file data/raw/BachBeach_and_tides.mat \
    --transects data/shp_files/DelMarTransects595to620at1m/DelMarTransects595to620at1m.shp \
    --output-npz data/processed/del_mar_widths.npz
```

---

## üìÇ Project Structure

| Directory | Description |
|bbox|---|
| `scripts/` | Standalone CLI tools and analysis scripts. |
| `src/` | Shared library code, helper functions, and core logic used by scripts. |
| `data/raw/` | Original, immutable datasets (e.g., .mat files, downloaded DEMs). |
| `data/processed/` | Cleaned data and output files generated by the toolbox. |
| `data/shp_files/` | Geospatial vector files (transects, shorelines). |
| `notebooks/` | Jupyter notebooks for experimental analysis and visualization. |
| `tests/` | Unit and integration tests. |

## ü§ù Contributing

This toolbox is designed to be modular. When adding a new tool:
1. Place the entry point script in `scripts/`.
2. If the logic is reusable, add it to a module in `src/`.
3. Update `environment.yml` if new dependencies are required.
4. Add a section to this README describing the new tool.

## üìÑ License

[License Information]